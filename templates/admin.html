{% extends "base.html" %}

{% block content %}
<div class="container section">
    <div class="section-header">
        <h1>Admin Dashboard</h1>
        <div class="actions">
            <a class="btn btn-primary" href="{{ url_for('admin_users') }}">
                <i class="fas fa-users"></i> Manage Users
            </a>
            <a class="btn btn-secondary" href="{{ url_for('profile') }}">
                <i class="fas fa-arrow-left"></i> Back to Profile
            </a>
        </div>
    </div>

    <div class="admin-grid">
        <!-- Quick Stats -->
        <div class="admin-card">
            <h3><i class="fas fa-chart-line"></i> Quick Stats</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">{{ total_users }}</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ total_lessons }}</div>
                    <div class="stat-label">Upcoming Lessons</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ total_courts }}</div>
                    <div class="stat-label">Court Bookings</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="admin-card">
            <h3><i class="fas fa-tachometer-alt"></i> Quick Actions</h3>
            <div class="d-grid gap-2">
                <a href="{{ url_for('admin_users') }}" class="btn btn-primary">
                    <i class="fas fa-users"></i> Manage Users
                </a>
                <a href="{{ url_for('admin_schedule') }}" class="btn btn-secondary">
                    <i class="fas fa-calendar-alt"></i> Manage Schedule
                </a>
                <a href="{{ url_for('admin_pricing') }}" class="btn btn-outline-primary">
                    <i class="fas fa-tags"></i> Manage Pricing
                </a>
            </div>
        </div>
        <!-- Recent Lesson Bookings -->
        <div class="admin-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="mb-0"><i class="fas fa-chalkboard-teacher"></i> Recent Lessons <span class="badge bg-info">{{ total_lessons }}</span></h3>
                <a href="{{ url_for('admin_lessons_today') }}" class="btn btn-sm btn-outline-primary">View All</a>
            </div>
            <div style="padding: 12px 0;"></div>
        </div>

        <!-- Recent Court Bookings -->
        <div class="admin-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="mb-0"><i class="fas fa-basketball-ball"></i> Recent Court Bookings <span class="badge bg-info">{{ total_courts }}</span></h3>
                <a href="{{ url_for('admin_courts') }}" class="btn btn-sm btn-outline-primary">View All</a>
            </div>
            <div style="padding: 12px 0;"></div>
        </div>

        <!-- Email Management -->
        <div class="admin-card">
            <h3><i class="fas fa-envelope"></i> Email Management</h3>
            <div class="email-actions">
                <a href="{{ url_for('send_reminders') }}?secret={{ config.REMINDER_SECRET if config.REMINDER_SECRET else 'test' }}" 
                   class="btn btn-primary w-100 mb-2"
                   onclick="return confirm('Send reminder emails for tomorrow?')">
                    <i class="fas fa-bell"></i> Send Tomorrow's Reminders
                </a>
                <p class="text-muted small mb-0">
                    This will send reminder emails to all customers with bookings tomorrow.
                </p>
            </div>
        </div>
    </div>
</div>


<style>
/* Grid Layout */
.admin-grid { 
    display: grid; 
    grid-template-columns: 1fr; 
    gap: 24px; 
}
@media (min-width: 1000px) { 
    .admin-grid { 
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); 
    } 
}

/* Cards */
.admin-card { 
    background: #fff; 
    border-radius: 12px; 
    padding: 20px; 
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
}

.admin-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 16px;
    margin-top: 12px;
}

.stat-card {
    background: #f8fafc;
    border-radius: 8px;
    padding: 16px;
    text-align: center;
}

.stat-value {
    font-size: 24px;
    font-weight: 700;
    color: #1e40af;
    margin-bottom: 4px;
}

.stat-label {
    font-size: 12px;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Tables */
.table { 
    width: 100%; 
    border-collapse: separate;
    border-spacing: 0;
}

.table th, 
.table td { 
    padding: 12px 16px;
    border-bottom: 1px solid #e5e7eb;
    vertical-align: middle;
}

.table th { 
    background: #f8fafc; 
    position: sticky; 
    top: 0;
    font-weight: 600;
    color: #4b5563;
    text-transform: uppercase;
    font-size: 12px;
    letter-spacing: 0.5px;
}

/* Badges */
.badge { 
    padding: 4px 10px; 
    border-radius: 999px; 
    font-size: 12px; 
    font-weight: 600; 
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.badge i {
    font-size: 10px;
}

.bg-success { 
    background: #d1fae5; 
    color: #059669; 
}

.bg-secondary { 
    background: #e5e7eb; 
    color: #374151; 
}

.bg-info { 
    background: #dbeafe; 
    color: #1d4ed8; 
}

/* Buttons */
.btn { 
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
    border: 2px solid transparent;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 13px;
}

.btn-primary { 
    background: #3b82f6;
    color: white;
    border-color: #3b82f6;
}

.btn-primary:hover {
    background: #2563eb;
    border-color: #2563eb;
}

.btn-outline-primary {
    background: transparent;
    color: #3b82f6;
    border-color: #3b82f6;
}

.btn-outline-primary:hover {
    background: #3b82f6;
    color: white;
}

.btn-warning { 
    background: #f59e0b; 
    color: white; 
    border-color: #f59e0b;
}

.btn-warning:hover {
    background: #d97706;
    border-color: #d97706;
}

/* Utilities */
.text-muted { 
    color: #6b7280; 
}

/* Email Actions */
.email-actions { 
    padding: 8px 0; 
}

/* Responsive Tables */
.table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Section Headers */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 16px;
}

.section-header h1 {
    margin: 0;
    font-size: 28px;
    font-weight: 700;
    color: #111827;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .section-header {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .actions {
        width: 100%;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }
    
    .btn {
        flex: 1 1 auto;
        min-width: 120px;
    }
}
</style>
{% endblock %}
